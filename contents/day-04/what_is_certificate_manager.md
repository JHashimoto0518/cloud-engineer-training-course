# AWS Certificate Managerとは
Certificate Managerは、SSL/TLS証明書の購入、デプロイ、管理を容易にするサービス。証明書を取得して、CloudFront、ELB、API GatewayなどのAWSリソースにデプロイできる。

証明書の購入、アップロード、更新という手間のかかる作業を自動化できる。[^1]

[^1]: 自社サーバーで大量のECサイトを管理した経験のあるソリューションアーキテクトが、一番好きなAWSサービスに挙げていた。

# SSL/TLS証明書とは

SSL/TLS[^2]は２つのシステム間の通信を保護する。 

[^2]: TLSはSSL後継のプロトコルである。SSLは脆弱性が発見されたので使用すべきではないが、広く認知されているので、今でも名称としては使われることがある。

２つのシステムは、サーバーとクライアント、またはサーバーとサーバーである場合もあるが、ここでは、最も一般的なECサイトとブラウザ間の通信を例にして説明する。

SSL/TLS証明書導入の目的は、次の２つである。
- 暗号化によるネットワーク通信の保護
- サーバー認証（サーバー所有者の企業がなりすましではないことを証明）

以降で、サーバー認証を実現するための暗号技術について説明していく。

# 共通鍵認証と公開鍵認証

## 鍵とは
- 暗号化/復号関数に渡すパラメータのこと
## 共通鍵暗号方式
送り手と受け手が同じ鍵を用いる暗号化方式を**共通鍵暗号方式**と呼ぶ。

例としてパスワード付きZIPが挙げられる。

第3者には秘密にしておく必要があることから、**秘密鍵暗号方式**とも呼ばれる。

### メリット
- 暗号化/復号に要する時間が短い
### デメリット
- 鍵の使いまわしができない。受け渡しのたびに異なる鍵を作成する必要がある
- 鍵を受け手に伝える必要があるが、安全に受け渡しすることが難しい

## 公開鍵暗号方式
公開鍵暗号方式は共通鍵暗号方式のデメリットを解決する暗号方式である。

暗号化に使う鍵と復号に使う鍵を分ける。前者を**公開鍵**、後者を**秘密鍵**と呼ぶ。
- TODO: 図（南京錠）
	- [JPRS用語辞典｜公開鍵暗号](https://jprs.jp/glossary/index.php?ID=0226)

### メリット
- 鍵を使いまわすことができる。鍵のペアを１セット用意すれば複数人とやり取りできる。
- 鍵を公開できるので、受け手に渡すことが容易。
### デメリット
- 共通鍵暗号方式に比べて、暗号化や復号に長い処理時間を要する。

利用形態に応じて、共通鍵暗号方式、公開鍵暗号方式を使い分ける。または後述するハイブリッド暗号方式を採用する。

### 課題
- 受け渡しの相手がなりすましていた場合は？

# デジタル署名とは
- 改ざんを防ぐ

- [【図解】よく分かるデジタル証明書(SSL証明書)の仕組み 〜https通信フロー,発行手順,CSR,自己署名(オレオレ)証明書,ルート証明書,中間証明書の必要性や扱いについて〜 | SEの道標](https://milestone-of-se.nesuke.com/sv-advanced/digicert/digital-certification-summary/)
> デジタル証明書を発行する中間認証局が、その中間認証局の秘密鍵でデジタル証明書にデジタル署名します。これにより、デジタル証明書に書かれたホスト名の機器は、中間認証局がお墨付きをくれた状態になります。(印鑑証明で言う地方役所)

- TODO: SSL証明書にデジタル署名の説明は必要か
	- [ディジタル署名とサーバ証明書と公開鍵の関係を調べよう！ \| ITの学び](https://itmanabi.com/digital-signature-server-certificate/)

## メッセージ認証コード
# デジタル証明書とは
- なりすましを防ぐ
## CAとは

# others
- クライアントはどうやってサーバー証明書の正当性を確認するのか (CLI)
- curlのオプション（TTLなど）
- ハイブリッド認証
- 一方向ハッシュ関数

# 参考
- [電子署名と電子証明書の違いの説明を集めてみました。 \- Qiita](https://qiita.com/ponsuke0531/items/47e147896467e7ba5838#:~:text=%E3%83%87%E3%82%B8%E3%82%BF%E3%83%AB%E7%BD%B2%E5%90%8D%E3%81%AF%E3%80%81%E6%96%87%E6%9B%B8%E3%81%AB,%E3%82%92%E8%A1%8C%E3%81%A3%E3%81%9F%E3%82%82%E3%81%AE%E3%81%A7%E3%81%99%E3%80%82&text=%E3%83%87%E3%82%B8%E3%82%BF%E3%83%AB%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%AF%E3%80%81%E8%A8%BC%E6%98%8E,%E8%A8%BC%E6%98%8E%EF%BC%89%E3%81%8C%E3%81%A7%E3%81%8D%E3%82%8B%E4%BB%95%E7%B5%84%E3%81%BF%E3%81%A7%E3%81%99%E3%80%82)